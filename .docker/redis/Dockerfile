########################################################################################################################
ARG     ALPINE_VERSION="${ALPINE_VERSION:-3.8}"
FROM    alpine:${ALPINE_VERSION}
########################################################################################################################
LABEL   Maintainer  =   "Haseeb Memon <memon.haseeb@hotmail.com>"
LABEL   Description =   "redis container for magento"
########################################################################################################################
RUN apk --update --no-cache add redis
########################################################################################################################
RUN touch /var/log/redis/redis.log
########################################################################################################################
########################################################################################################################
#Copy custom configs to container
COPY .docker/redis/conf/redis.conf /etc/redis.conf
########################################################################################################################
#Copy shell executable script to container
COPY .docker/redis/bin/startup.sh /usr/local/bin/startup.sh
RUN ["chmod", "+x", "/usr/local/bin/startup.sh"]
########################################################################################################################
# Expose Ports
EXPOSE 6379
########################################################################################################################
WORKDIR /var/lib/redis
########################################################################################################################
CMD [ "sh", "/usr/local/bin/startup.sh" ]
